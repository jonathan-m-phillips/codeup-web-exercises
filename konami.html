<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Konami Code</title>
</head>

<!--   custom css file   -->
<link rel="stylesheet" href="css/konami.css">


<body>




<!--   mario gif   -->
<div class="mario-gif">
    <iframe src="https://giphy.com/embed/6RsYcS66Iso0" width="400" height="408" frameBorder="0"
            class="giphy-embed"></iframe>
</div>

<!--   mario audio   -->
<audio src="audio/npc-yc_mario-win.wav"></audio>


<!--   welecome   -->
<h1 id="konami-header">Enter the konami code!</h1>


<!--   wrapping the buttons into a container   -->
<div class="body-container">

    <!--    wrapping the arrow buttons into a container   -->
    <div class="arrows-container">
        <img src="img/up@330x.png" id="top-arrow">
        <img src="img/right@330x.png" id="right-arrow">
        <img src="img/middle@330x.png" id="middle-arrow">
        <img src="img/down@330x.png" id="bottom-arrow">
        <img src="img/left@330x.png" id="left-arrow">
    </div>

    <!--    wrapping the letter buttons into a container   -->
    <div class="buttons-container">
        <img src="img/a@330x.png" id="a-button">
        <img src="img/b@330x.png" id="b-button">
    </div>

    <!--   select button   -->
    <div class="select-container">
        <p id="select" onclick="reloadPage();">Select</p>
    </div>
    <!--    start button   -->
    <div class="start-container">
        <p id="start">Start</p>
    </div>

</div>




<!--   linking to jquery locally   -->
<script src="js/jquery-3.5.1.js"></script>



<!--   custom js   -->
<script>



    // creating arrays for allowed user input in konami code
    let allowedKeys = {
        37: 'left',
        38: 'up',
        39: 'right',
        40: 'down',
        65: 'a',
        66: 'b',
        13: 'enter'
    };



    // konami code array
    let konamiCode = ["up", "up", "down", "down", "left", "right", "left", "right", "b", "a", "enter"];

    // user input position on the code
    let currentPosition = 0;


    // alert if user input correct code
    let correctCode = "You are granted 30 extra lives!";

    // hiding the gifs added to the page
    $('.konami-gif').hide();
    $('.mario-gif').hide();



    // making the window clickable, such as using a controller
    $('#left-arrow').click(function () {
        jQuery.event.trigger({type: 'keydown', keyCode: 37});
    });
    $('#top-arrow').click(function () {
        jQuery.event.trigger({type: 'keydown', keyCode: 38});
    });
    $('#right-arrow').click(function () {
        jQuery.event.trigger({type: 'keydown', keyCode: 39});
    });
    $('#bottom-arrow').click(function () {
        jQuery.event.trigger({type: 'keydown', keyCode: 40});
    });
    $('#a-button').click(function () {
        jQuery.event.trigger({type: 'keydown', keyCode: 65});
    });
    $('#b-button').click(function () {
        jQuery.event.trigger({type: 'keydown', keyCode: 66});
    });
    $('#start').click(function () {
        jQuery.event.trigger({type: 'keydown', keyCode: 13});
    });



    // keydown event function
    $(document).keydown(function (e) {

            // if a button is entered, the button will get smaller indicated it has been pressed
            if (e.code === 'ArrowUp') {


                $('#top-arrow').css({
                    'height': '90px',
                    'left': '300px'
                });
                $('#bottom-arrow').css({
                    'height': '',
                    'top': '',
                    'left': ''
                });
                $('#left-arrow').css({
                    'height': ''
                });
                $('#right-arrow').css({
                    'height': '',
                    'top': '',
                    'left': ''
                });
                $('#b-button').css({
                    'height': ''
                });
                $('#a-button').css({
                    'height': ''
                });
                $('#start').css({
                    'height': ''
                });


            } else if (e.code === 'ArrowDown') {


                $('#top-arrow').css({
                    'height': '',
                    'left': ''
                });
                $('#bottom-arrow').css({
                    'height': '90px',
                    'top': '386px',
                    'left': '300px'
                });
                $('#left-arrow').css({
                    'height': ''
                });
                $('#right-arrow').css({
                    'height': '',
                    'top': '',
                    'left': ''
                });
                $('#b-button').css({
                    'height': ''
                });
                $('#a-button').css({
                    'height': ''
                });
                $('#start').css({
                    'height': '7%'
                });


            } else if (e.code === 'ArrowLeft') {


                $('#top-arrow').css({
                    'height': '',
                    'left': ''
                });
                $('#bottom-arrow').css({
                    'height': '',
                    'top': '',
                    'left': ''
                });
                $('#left-arrow').css({
                    'height': '90px'
                });
                $('#right-arrow').css({
                    'height': '',
                    'top': '',
                    'left': ''
                });
                $('#b-button').css({
                    'height': ''
                });
                $('#a-button').css({
                    'height': ''
                });
                $('#start').css({
                    'height': ''
                });


            } else if (e.code === 'ArrowRight') {


                $('#top-arrow').css({
                    'height': '',
                    'left': ''
                });
                $('#bottom-arrow').css({
                    'height': '',
                    'top': '',
                    'left': ''
                });
                $('#left-arrow').css({
                    'height': ''
                });
                $('#right-arrow').css({
                    'height': '90px',
                    'top': '286px',
                    'left': '405px'
                });
                $('#b-button').css({
                    'height': ''
                });
                $('#a-button').css({
                    'height': ''
                });
                $('#start').css({
                    'height': ''
                });


            } else if (e.code === 'KeyB') {


                $('#top-arrow').css({
                    'height': '',
                    'left': ''
                });
                $('#bottom-arrow').css({
                    'height': '',
                    'top': '',
                    'left': ''
                });
                $('#left-arrow').css({
                    'height': ''
                });
                $('#right-arrow').css({
                    'height': '',
                    'top': '',
                    'left': ''
                });
                $('#b-button').css({
                    'height': '90px'
                });
                $('#a-button').css({
                    'height': ''
                });
                $('#start').css({
                    'height': ''
                });


            } else if (e.code === 'KeyA') {


                $('#top-arrow').css({
                    'height': '',
                    'left': ''
                });
                $('#bottom-arrow').css({
                    'height': '',
                    'top': '',
                    'left': ''
                });
                $('#left-arrow').css({
                    'height': ''
                });
                $('#right-arrow').css({
                    'height': '',
                    'top': '',
                    'left': ''
                });
                $('#b-button').css({
                    'height': ''
                });
                $('#a-button').css({
                    'height': '90px'
                });
                $('#start').css({
                    'height': ''
                });


            } else if (e.code === 'Enter') {
                $('#top-arrow').css({
                    'height': '',
                    'left': ''
                });
                $('#bottom-arrow').css({
                    'height': '',
                    'top': '',
                    'left': ''
                });
                $('#left-arrow').css({
                    'height': ''
                });
                $('#right-arrow').css({
                    'height': '',
                    'top': '',
                    'left': ''
                });
                $('#b-button').css({
                    'height': ''
                });
                $('#a-button').css({
                    'height': ''
                });
                $('#start').css({
                    'height': '8%'
                });

            }

            // adding user input to key
            let key = allowedKeys[e.keyCode];

            // debugging keys
            // console.log(key)

            // requiredKey set equal to current position in the konami code array
            let requiredKey = konamiCode[currentPosition];

            // incrementing current position in konami code if the required key is entered
            if (key == requiredKey) {
                currentPosition++

                // if current position of konami code is the same length as the konami code call function cheatMode and reset current position to 0 to restart the code
                if (currentPosition == konamiCode.length) {
                    cheatMode();
                    currentPosition = 0;
                }
            }

            // if current position does not equal full length of konami then reset to the beginning
            else {
                currentPosition = 0;
            }

        }
    );

    // cheatMode set to alert correctCode if all keys entered correctly
    function cheatMode() {
        $('body').css({
            'backgroundColor': 'red',
            'color': 'white'
        });


        $('h1').html("You did it! You activated the code!")
        alert("You just earned 30 lives!!!");
        let audio = $("audio")[0];
        audio.play();

        $('.konami-gif').show();
        $('.mario-gif').show();

    }

    function reloadThePage() {
        $('#select').click(function () {
            window.location.reload(true);
        });
    }

    reloadThePage();



</script>
</body>
</html>